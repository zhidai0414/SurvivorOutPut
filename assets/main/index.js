System.register("chunks:///_virtual/Bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enemy.ts","./GameManager.ts"],(function(t){"use strict";var i,n,o,e,s,r,c;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,e=t.Vec3,s=t.Component},function(t){r=t.Enemy},function(t){c=t.GameManager}],execute:function(){var u,h;n._RF.push({},"9d10d6r2B1DUpuaJ1KcfMD/","Bullet",void 0);var a=o.ccclass;o.property,t("Bullet",a("Bullet")(((h=function(t){function n(){for(var i,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(i=t.call.apply(t,[this].concat(o))||this).Config=void 0,i.curPos=new e,i}i(n,t);var o=n.prototype;return o.start=function(){this.node.setPosition(this.Config.v2InitPos.x,this.Config.v2InitPos.y)},o.update=function(t){this.Config.nLiveTime-=t,this.Config.nLiveTime<=0&&this.node.destroy(),this.node.getPosition(this.curPos),this.curPos.x=this.curPos.x+this.Config.v2Dir.x*this.Config.nMoveSpeed,this.curPos.y=this.curPos.y+this.Config.v2Dir.y*this.Config.nMoveSpeed,this.node.setPosition(this.curPos);var i=c.instance.CheckHit(this.curPos);if(null!=i){var o=i.getComponent(r);o.Hurt(n.BULLET_DAMAGE),o.HitBack(100,this.Config.Source),this.node.destroy()}},n}(s)).BULLET_DAMAGE=1,u=h))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/BulletConfig.ts",["cc"],(function(i){"use strict";var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"f173fnAjpJFr4A5IX2+6v4e","BulletConfig",void 0);i("BulletConfig",(function(){this.v2InitPos=void 0,this.nMoveSpeed=void 0,this.v2Dir=void 0,this.nLiveTime=2,this.Source=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Chest.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,n,o,s;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,o=t.Vec3,s=t.Component}],execute:function(){var c;r._RF.push({},"0b66ayaNfxIZq0SNOS/LpPP","Chest",void 0);var i=n.ccclass;n.property,t("Chest",i("Chest")(c=function(t){function r(){for(var e,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).CurPos=new o,e}return e(r,t),r.prototype.start=function(){this.node.setPosition(this.CurPos)},r}(s))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/Enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./PlayerController.ts","./RollBase.ts"],(function(t){"use strict";var s,e,o,i,n,r,a,h;return{setters:[function(t){s=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Vec3,n=t.randomRangeInt},function(t){r=t.GameManager},function(t){a=t.PlayerController},function(t){h=t.RollBase}],execute:function(){var c;e._RF.push({},"8c435W0pn5MupinChMcGrE5","Enemy",void 0);var f=o.ccclass;o.property,t("Enemy",f("Enemy")(c=function(t){function e(){for(var s,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(s=t.call.apply(t,[this].concat(o))||this).Config=void 0,s.targetPos=new i,s.offsetPos=new i,s.isFlip=!1,s}s(e,t);var o=e.prototype;return o.start=function(){this.CurHP=this.Config.MaxHP,this.MoveSpeed=this.Config.nMoveSpeed,this.node.setPosition(this.Config.v2InitPos.x,this.Config.v2InitPos.y)},o.update=function(t){this.node.getPosition(this.CurPos),this.Config.Target.getPosition(this.targetPos);var s=this.Config.Target.getComponent(a);i.subtract(this.offsetPos,this.targetPos,this.CurPos),this.offsetPos.lengthSqr()<2500?s.Hurt(1,this.node):(i.multiplyScalar(this.offsetPos,this.offsetPos.normalize(),this.MoveSpeed),i.add(this.CurPos,this.CurPos,this.offsetPos),this.offsetPos.x>0&&!this.isFlip&&(this.node.setScale(new i(-1,1,1)),this.isFlip=!0),this.node.setPosition(this.CurPos))},o.OnKill=function(t){var s=n(0,100);s>=60?r.instance.CreateChest(this.node.getPosition()):s>=20&&r.instance.CreateExp(this.node.getPosition()),r.instance.RemoveEnemy(this.Config.EID)},e}(h))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyConfig.ts",["cc"],(function(t){"use strict";var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"1d5c2GKADdLA6j4tx3yAWRF","EnemyConfig",void 0);t("EnemyConfig",(function(){this.EID=void 0,this.Target=void 0,this.v2InitPos=void 0,this.nMoveSpeed=3,this.MaxHP=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/Equitment.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var n;t("EquitmentEnum",void 0),e._RF.push({},"c8fd280ybRKZrFNjsvGuVDU","Equitment",void 0),function(t){t[t.Weapon=0]="Weapon",t[t.Armor=1]="Armor",t[t.Shoe=2]="Shoe",t[t.MAX=3]="MAX"}(n||(n=t("EquitmentEnum",{})));t("EquitmentData",(function(){})).Data=[{ID:0,Name:"武器",Icon:"Sword1",Rare:1,Comment:"伤害+1"},{ID:1,Name:"衣服",Icon:"Shield1",Rare:1,Comment:"最大生命值+5"},{ID:2,Name:"鞋子",Icon:"Projectile1",Rare:1,Comment:"移速+1"}];t("Equitment",(function(){this.ID=void 0,this.Name=void 0,this.Icon=void 0,this.Rare=void 0,this.Comment=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/EquitmentManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bullet.ts","./Equitment.ts","./EventManager.ts","./EventType.ts","./JoyStick.ts","./PlayerController.ts"],(function(t){"use strict";var e,n,r,i,a,o,s,u,c,l,E,h,g;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,i=t.director,a=t.randomRangeInt,o=t.find,s=t.Component},function(t){u=t.Bullet},function(t){c=t.EquitmentEnum},function(t){l=t.EventManager},function(t){E=t.EventType},function(t){h=t.JoyStick},function(t){g=t.PlayerController}],execute:function(){var f,m;n._RF.push({},"42145dWZaVB8ZzjEQHY4vpx","EquitmentManager",void 0);var q=r.ccclass;r.property,t("EquitmentManager",q("EquitmentManager")(((m=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).Bag=new Map,e.EquitsSelect=new Array,e.PlayerController=void 0,e}e(n,t);var r=n.prototype;return r.onLoad=function(){n.instance=this,i.addPersistRootNode(this.node)},r.GetEquitmentCount=function(t){return this.Bag[t]||0},r.SetEquitment=function(t){this.EquitsSelect=new Array,this.Bag.clear();for(var e=0;e<t.length;e++){var n=t[e];this.EquitsSelect.push(n),this.Bag.has(n)?this.Bag[n]+=1:this.Bag[n]=1}},r.GetAllEquitment=function(){return this.EquitsSelect},r.RandomEquitment=function(t){void 0===t&&(t=3);for(var e=new Array,n=0;n<t;n++){var r=a(0,c.MAX);e.push(r)}return e},r.OnSelectEquit=function(t){switch(t){case c.Armor:console.log("[EquitmentManager] HP+5"),this.PlayerController.IncreaseHPMax(5);break;case c.Shoe:console.log("[EquitmentManager] PLAYER_MOVE_SPEED + 1"),h.PLAYER_MOVE_SPEED+=1;break;case c.Weapon:console.log("[EquitmentManager] BULLET_DAMAGE + 1"),u.BULLET_DAMAGE+=1;break;default:return void console.error("[EquitmentManager] 未知装备ID：",t)}this.EquitsSelect.push(t),this.Bag.has(t)?this.Bag[t]+=1:this.Bag[t]=1},r.OnGameStart=function(){l.instance.RegisterEvent(E.EquitmentSelect,this.OnSelectEquit,n.instance),this.PlayerController=o("Canvas/Player").getComponent(g)},r.onDestroy=function(){l.instance.DeleteEvent(E.EquitmentSelect,this.OnSelectEquit,this)},n}(s)).instance=void 0,f=m))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,o,r,i,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.EventTarget,i=t.director,c=t.Component}],execute:function(){var a,s;e._RF.push({},"f1402rk9u5KFYm5inHv5N+K","EventManager",void 0);var u=o.ccclass,v=(o.property,new r);t("EventManager",u("EventManager")(((s=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.onLoad=function(){e.instance=this,i.addPersistRootNode(this.node)},o.RegisterEvent=function(t,n,e){v.on(t,n,e)},o.DispatchEvent=function(t,n,e,o,r,i){v.emit(t,n,e,o,r,i)},o.DeleteEvent=function(t,n,e){v.off(t,n,e)},o.OnGameStart=function(){},e}(c)).instance=void 0,a=s))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/EventType.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var n;e("EventType",void 0),t._RF.push({},"d01a1UM6CVGmqLq56AaNSvR","EventType",void 0),function(e){e[e.HPChange=1]="HPChange",e[e.ExpChange=2]="ExpChange",e[e.EquitmentSelect=3]="EquitmentSelect"}(n||(n=e("EventType",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/Exp.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,e,r,n;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,n=t.Component}],execute:function(){var s;e._RF.push({},"b85be0w/65JLLe8KZu9xa0j","Exp",void 0);var i=r.ccclass;t("Exp",i("Exp")(s=function(t){function e(){for(var o,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(o=t.call.apply(t,[this].concat(r))||this).Player=void 0,o.CurPos=void 0,o.PlayerPos=void 0,o.ExpCount=void 0,o}return o(e,t),e.prototype.start=function(){this.node.setPosition(this.CurPos)},e}(n))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Chest.ts","./Enemy.ts","./EnemyConfig.ts","./EquitmentManager.ts","./EventManager.ts","./EventType.ts","./Exp.ts","./UIManager.ts"],(function(t){"use strict";var e,n,i,s,o,a,r,h,p,E,u,c,l,C,m,y,f,v,g,P,L,x,d,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,r=t.Node,h=t.director,p=t.resources,E=t.Prefab,u=t.randomRange,c=t.Vec2,l=t.instantiate,C=t.Vec3,m=t.find,y=t.Component},function(t){f=t.Chest},function(t){v=t.Enemy},function(t){g=t.EnemyConfig},function(t){P=t.EquitmentManager},function(t){L=t.EventManager},function(t){x=t.EventType},function(t){d=t.Exp},function(t){b=t.UIManager}],execute:function(){var R,I,M,S,U,w,T,G,D,N,A,H;o._RF.push({},"4b412F1lFpBS48/M8MkswNI","GameManager",void 0);var _=a.ccclass,z=a.property;t("GameManager",(R=_("GameManager"),I=z(r),M=z(r),S=z(r),U=z(r),R(((H=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).ExpCount=void 0,e.LvUpExp=void 0,e.Lv=void 0,e.PlayerHP=10,e.PlayerMaxHP=10,e.EnemytPrefab=void 0,i(e,"EnemyRoot",G,s(e)),e.EnemyList=void 0,e.lastEnemyCreateTime=0,e.EIDIter=1,i(e,"Player",D,s(e)),e.ExpPrefab=void 0,i(e,"ExpRoot",N,s(e)),e.ExpList=void 0,e.ChestPrefab=void 0,i(e,"ChestRoot",A,s(e)),e.ChestList=void 0,e.ChestLootCount=0,e.curTimer=0,e.IsGameStart=!1,e}n(e,t);var o=e.prototype;return o.onLoad=function(){var t=this;e.instance=this,h.addPersistRootNode(this.node),p.load("Prefabs/Enemy",E,(function(e,n){t.EnemytPrefab=n})),p.load("Prefabs/Chest",E,(function(e,n){t.ChestPrefab=n})),p.load("Prefabs/Exp",E,(function(e,n){t.ExpPrefab=n}))},o.start=function(){},o.update=function(t){this.IsGameStart&&(this.lastEnemyCreateTime+=t,this.lastEnemyCreateTime>e.ENEMY_SPAWN_INTERVEL&&(this.lastEnemyCreateTime=0,this.EnemyList.push(this.CreateEnemy())),this.UpdateCheckExp(),this.UpdateCheckChest())},o.CreateEnemy=function(){var t=u(-1,1),e=u(-1,1),n=new c(t,e).normalize();c.multiplyScalar(n,n,b.instance.GetCanvasSize().x/2);var i=new g;i.Target=this.Player,i.nMoveSpeed=3,i.v2InitPos=n,i.MaxHP=2,i.EID=this.EIDIter+1,this.EIDIter++;var s=l(this.EnemytPrefab);return s.getComponent(v).Config=i,s.parent=this.EnemyRoot,s},o.CheckHit=function(t){for(var e=new C,n=(new r,0);n<this.EnemyList.length;n++){var i=this.EnemyList[n];if(e=i.getPosition(),C.subtract(e,e,t).lengthSqr()<3025)return i}},o.RemoveEnemy=function(t){for(var e=0;e<this.EnemyList.length;e++)if(this.EnemyList[e].getComponent(v).Config.EID==t)return void this.EnemyList.splice(e,1)},o.CreateExp=function(t){var e=l(this.ExpPrefab),n=e.getComponent(d);return n.CurPos=t,n.ExpCount=1,n.Player=this.Player,e.parent=this.ExpRoot,this.ExpList.push(e),e},o.CreateChest=function(t){var e=l(this.ChestPrefab);return e.getComponent(f).CurPos=t,e.parent=this.ChestRoot,this.ChestList.push(e),e},o.UpdateCheckExp=function(){for(var t=0;t<this.ExpList.length;t++){var e=this.ExpList[t].getPosition(),n=this.Player.getPosition(),i=new C;if(C.subtract(i,e,n),i.lengthSqr()<900){var s=this.ExpList[t].getComponent(d).ExpCount;this.AddExpCount(s),this.ExpList[t].destroy(),this.ExpList.splice(t,1)}}},o.UpdateCheckChest=function(){for(var t=0;t<this.ChestList.length;t++){var e=this.ChestList[t].getPosition(),n=this.Player.getPosition(),i=new C;if(C.subtract(i,e,n),i.lengthSqr()<900){this.ChestLootCount++,this.ChestList[t].destroy(),this.ChestList.splice(t,1);var s=P.instance.RandomEquitment();console.log("开箱喽~"),console.log(s)}}},o.AddExpCount=function(t){this.ExpCount+=t,this.ExpCount>=this.LvUpExp&&(this.ExpCount=0,this.Lv+=1,this.LvUpExp=5*(this.Lv+1)),L.instance.DispatchEvent(x.ExpChange,this.ExpCount,this.LvUpExp,this.Lv)},o.TimeOut=function(){this.IsGameStart&&(this.IsGameStart=!1,console.log("箱子数量：",this.ChestLootCount),this.ChestLootCount>0?b.instance.OpenUIOpenChest():b.instance.OpenUIResult())},o.GetClosestEnemy=function(){for(var t=this.Player.getPosition(),e=Number.MAX_VALUE,n=-1,i=0;i<this.EnemyList.length;i++){var s=this.EnemyList[i].getPosition(),o=C.squaredDistance(t,s);o<e&&(e=o,n=i)}return this.EnemyList[n]},o.OnPlayerHPChange=function(t,e,n){this.PlayerHP=t,this.PlayerMaxHP=n},o.OnGameStart=function(){this.ExpRoot=m("Canvas/ExpRoot"),this.ChestRoot=m("Canvas/ChestRoot"),this.EnemyRoot=m("Canvas/EnemyRoot"),this.Player=m("Canvas/Player"),L.instance.RegisterEvent(x.HPChange,this.OnPlayerHPChange,this)},o.GameStart=function(){this.ExpCount=0,this.Lv=0,this.LvUpExp=5*(this.Lv+1),this.IsGameStart=!0,this.EnemyList=new Array,this.ExpList=new Array,this.ChestList=new Array,L.instance.DispatchEvent(x.ExpChange,this.ExpCount,this.LvUpExp,this.Lv)},e}(y)).instance=void 0,H.ENEMY_SPAWN_INTERVEL=2,H.TURN_TIME=120,G=e((T=H).prototype,"EnemyRoot",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(T.prototype,"Player",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(T.prototype,"ExpRoot",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(T.prototype,"ChestRoot",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=T))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/JoyStick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts"],(function(t){"use strict";var o,e,i,r,n,s,c,u,a,h,l,y,P;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,c=t.Node,u=t.Vec2,a=t.Vec3,h=t.input,l=t.Input,y=t.Component},function(t){P=t.UIManager}],execute:function(){var p,T,v,S,f,m,E,d,k,J;n._RF.push({},"e5f91TuZ5BIfZMNebGQpgI5","JoyStick",void 0);var N=s.ccclass,O=s.property;t("JoyStick",(p=N("JoyStick"),T=O({type:c}),v=O({type:c}),S=O({type:c}),p(((J=function(t){function o(){for(var o,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return o=t.call.apply(t,[this].concat(n))||this,i(o,"Player",E,r(o)),i(o,"JoyStickNode",d,r(o)),i(o,"JoyStickCenter",k,r(o)),o.curTouchPos=new u,o.lastTouchPos=new u,o.moveNormal=new u,o.curPlayerPos=new a,o.curJoyStickCenterPos=new u,o.isTouch=!1,o}e(o,t);var n=o.prototype;return n.start=function(){h.on(l.EventType.TOUCH_MOVE,this.OnTouchMove,this),h.on(l.EventType.TOUCH_END,this.OnTouchEnd,this),h.on(l.EventType.TOUCH_START,this.OnTouchStart,this),this.JoyStickNode.active=!1},n.update=function(t){this.isTouch&&null!=this.Player&&(this.Player.getPosition(this.curPlayerPos),this.curPlayerPos.x+=this.moveNormal.x*o.PLAYER_MOVE_SPEED,this.curPlayerPos.y+=this.moveNormal.y*o.PLAYER_MOVE_SPEED,this.curPlayerPos.z=0,this.Player.setPosition(this.curPlayerPos))},n.OnTouchStart=function(t){t.getLocation(this.lastTouchPos),this.isTouch=!0,this.JoyStickNode.active=!0;var o=P.instance.TouchPosToUIPos(this.lastTouchPos);this.node.setPosition(o.x,o.y)},n.OnTouchEnd=function(t){this.isTouch=!1,this.JoyStickNode.active=!1},n.OnTouchMove=function(t){t.getLocation(this.curTouchPos),u.subtract(this.moveNormal,this.curTouchPos,this.lastTouchPos),this.moveNormal=this.moveNormal.normalize();var o=new u;u.multiplyScalar(o,this.moveNormal,40),u.add(this.curJoyStickCenterPos,u.ZERO,o),this.JoyStickCenter.setPosition(this.curJoyStickCenterPos.x,this.curJoyStickCenterPos.y)},o}(y)).PLAYER_MOVE_SPEED=3,E=o((m=J).prototype,"Player",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=o(m.prototype,"JoyStickNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=o(m.prototype,"JoyStickCenter",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=m))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Bullet.ts","./BulletConfig.ts","./Chest.ts","./Enemy.ts","./EnemyConfig.ts","./Equitment.ts","./EquitmentManager.ts","./EventManager.ts","./EventType.ts","./Exp.ts","./GameManager.ts","./JoyStick.ts","./PlayerController.ts","./RollBase.ts","./SaveManager.ts","./UIManager.ts","./UIChestItem.ts","./UIMain.ts","./UIOpenChest.ts","./UIResult.ts","./UIStart.ts","./UIStatusGroup.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletConfig.ts","./Enemy.ts","./EventManager.ts","./EventType.ts","./GameManager.ts","./RollBase.ts","./UIManager.ts"],(function(t){"use strict";var n,e,i,a,r,o,s,c,l,u,h;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,a=t.Vec2},function(t){r=t.BulletConfig},function(t){o=t.Enemy},function(t){s=t.EventManager},function(t){c=t.EventType},function(t){l=t.GameManager},function(t){u=t.RollBase},function(t){h=t.UIManager}],execute:function(){var P;e._RF.push({},"75297QwDKFO4rJtlG7mMKeM","PlayerController",void 0);var f=i.ccclass;i.property,t("PlayerController",f("PlayerController")(P=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return(n=t.call.apply(t,[this].concat(i))||this).AttackInterval=1,n.AttackTimer=0,n}n(e,t);var i=e.prototype;return i.onLoad=function(){t.prototype.onLoad.call(this),this.MaxHP=l.instance.PlayerMaxHP,this.CurHP=l.instance.PlayerHP},i.start=function(){s.instance.DispatchEvent(c.HPChange,this.CurHP,0,this.MaxHP)},i.update=function(t){this.AttackTimer>0?this.AttackTimer-=t:(this.AttackTimer=this.AttackInterval,this.Attack())},i.Attack=function(){var t=l.instance.GetClosestEnemy();if(null!=t){var n=this.node.getPosition(),e=t.getPosition(),i=new a(e.x-n.x,e.y-n.y),o=new r;o.nMoveSpeed=5,o.v2Dir=i.normalize(),o.v2InitPos=new a(n.x,n.y),o.Source=this.node,h.instance.CreateBullet(o)}},i.OnHurt=function(t,n){n.getComponent(o).Kill(),s.instance.DispatchEvent(c.HPChange,this.CurHP,t,this.MaxHP)},i.OnKill=function(t){this.CurHP<=0&&h.instance.OpenUIResult()},i.Kill=function(t){void 0===t&&(t=null),this.OnKill(t)},i.OnTouchStart=function(t){},i.IncreaseHPMax=function(t){this.MaxHP+=t,this.CurHP+=t,s.instance.DispatchEvent(c.HPChange,this.CurHP,-t,this.MaxHP)},e}(u))||P);e._RF.pop()}}}));

System.register("chunks:///_virtual/RollBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,i,n,s,r;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,s=t.Vec3,r=t.Component}],execute:function(){var e;i._RF.push({},"a1247G97mxIOrioNtrHGuFk","RollBase",void 0);var u=n.ccclass;n.property,t("RollBase",u("RollBase")(e=function(t){function i(){for(var o,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(o=t.call.apply(t,[this].concat(n))||this).MaxHP=void 0,o.CurHP=void 0,o.CurPos=void 0,o.MoveSpeed=void 0,o}o(i,t);var n=i.prototype;return n.OnHitBack=function(t,o){},n.OnHurt=function(t,o){},n.OnKill=function(t){},n.onLoad=function(){this.CurPos=new s},n.HitBack=function(t,o){this.OnHitBack(t,o);var i=new s;this.CurPos=this.node.getPosition(),s.subtract(i,this.CurPos,o.getPosition()),s.multiplyScalar(i,i.normalize(),t),s.add(this.CurPos,this.CurPos,i),this.node.setPosition(this.CurPos)},n.Hurt=function(t,o){void 0===o&&(o=null),this.CurHP-=t,this.OnHurt(t,o),this.CurHP<=0&&this.Kill()},n.Kill=function(t){void 0===t&&(t=null),this.OnKill(t),this.node.destroy()},i}(r))||e);i._RF.pop()}}}));

System.register("chunks:///_virtual/SaveManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bullet.ts","./EquitmentManager.ts","./GameManager.ts","./JoyStick.ts"],(function(t){"use strict";var e,n,a,o,s,i,c,r,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,o=t.director,s=t.Component},function(t){i=t.Bullet},function(t){c=t.EquitmentManager},function(t){r=t.GameManager},function(t){u=t.JoyStick}],execute:function(){var l,p;n._RF.push({},"4a5bbGdKEBDnpt6sp5Pfyc0","SaveManager",void 0);var v=a.ccclass;a.property,t("SaveManager",v("SaveManager")(((p=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var a=n.prototype;return a.onLoad=function(){n.instance=this,o.addPersistRootNode(this.node)},a.start=function(){},a.Save=function(){var t={hp:r.instance.PlayerHP,hpmax:r.instance.PlayerMaxHP,lv:r.instance.Lv,exp:r.instance.ExpCount,movespeed:u.PLAYER_MOVE_SPEED,bulletdamage:i.BULLET_DAMAGE,chestloot:r.instance.ChestLootCount,equits:c.instance.GetAllEquitment()},e=JSON.stringify(t);console.log("[SaveManager] Save 存档信息：",t),localStorage.setItem("userdata",e)},a.Load=function(){var t=localStorage.getItem("userdata"),e=JSON.parse(t);console.log("[SaveManager] Load 读档信息：",e),r.instance.PlayerHP=e.hp,r.instance.PlayerMaxHP=e.hpmax,r.instance.Lv=e.lv,r.instance.ExpCount=e.ExpCount,u.PLAYER_MOVE_SPEED=e.movespeed,i.BULLET_DAMAGE=e.bulletdamage,r.instance.ChestLootCount=e.chestloot,c.instance.SetEquitment(e.equits)},a.onDestroy=function(){},n}(s)).instance=void 0,l=p))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIChestItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./EventType.ts"],(function(t){"use strict";var e,n,i,r,o,a,c,l,s,u,p,m,f,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.Button,l=t.Label,s=t.Sprite,u=t.resources,p=t.SpriteFrame,m=t.Component},function(t){f=t.EventManager},function(t){h=t.EventType}],execute:function(){var I,v,y,b,C,g,E,d,D,S,z;o._RF.push({},"49652kLHn5FRK+YUq12Azkh","UIChestItem",void 0);var B=a.ccclass,F=a.property;t("UIChestItem",(I=B("UIChestItem"),v=F(c),y=F(l),b=F(l),C=F(s),I((d=e((E=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).EquitID=-1,i(e,"SelfBtn",d,r(e)),i(e,"Name",D,r(e)),i(e,"Comment",S,r(e)),i(e,"Icon",z,r(e)),e}n(e,t);var o=e.prototype;return o.start=function(){this.SelfBtn.node.on(c.EventType.CLICK,this.OnClickBtn,this)},o.SetConfig=function(t){var e=this;this.EquitID=t.ID,this.Name.string=t.Name,this.Comment.string=t.Comment,this.node.active=!1,u.load("Icon/"+t.Icon+"/spriteFrame",p,(function(t,n){e.Icon.spriteFrame=n,e.node.active=!0}))},o.OnClickBtn=function(){f.instance.DispatchEvent(h.EquitmentSelect,this.EquitID)},o.onDestroy=function(){},e}(m)).prototype,"SelfBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(E.prototype,"Name",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(E.prototype,"Comment",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(E.prototype,"Icon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=E))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIMain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./SaveManager.ts"],(function(t){"use strict";var e,i,n,r,a,o,c,u,s,l,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,c=t.Label,u=t.Button,s=t.game,l=t.Component},function(t){p=t.GameManager},function(t){f=t.SaveManager}],execute:function(){var m,h,v,g,T,M,y;a._RF.push({},"2702bMx1tlJYrBxvLX50JuV","UIMain",void 0);var b=o.ccclass,d=o.property;t("UIMain",(m=b("UIMain"),h=d(c),v=d(u),m((M=e((T=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"Timer",M,r(e)),n(e,"QuitBtn",y,r(e)),e.curTimer=0,e}i(e,t);var a=e.prototype;return a.start=function(){this.QuitBtn.node.on(u.EventType.CLICK,this.OnClickBtn,this)},a.SetTimer=function(t){this.curTimer=t},a.update=function(t){if(this.curTimer-=t,this.curTimer>0){var e=Math.floor(this.curTimer/60),i=Math.floor(this.curTimer%60);this.Timer.string=e+":"+i}else p.instance.TimeOut()},a.OnClickBtn=function(t){var e=t.node.name;console.log(e),"QuitBtn"==e&&(f.instance.Save(),s.end())},e}(l)).prototype,"Timer",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(T.prototype,"QuitBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=T))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bullet.ts","./GameManager.ts","./UIMain.ts"],(function(e){"use strict";var t,n,a,i,o,r,s,l,u,c,f,p,v,h,d,g,I,U,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Camera,l=e.Canvas,u=e.director,c=e.resources,f=e.Prefab,p=e.Vec2,v=e.view,h=e.instantiate,d=e.find,g=e.Component},function(e){I=e.Bullet},function(e){U=e.GameManager},function(e){b=e.UIMain}],execute:function(){var M,C,m,P,y,B,R,w;o._RF.push({},"bb7b3Qm5S1HQaTMZKF6tYY/","UIManager",void 0);var z=r.ccclass,S=r.property;e("UIManager",(M=z("UIManager"),C=S(s),m=S(l),M(((w=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,a(t,"MainCamera",B,i(t)),a(t,"canvas",R,i(t)),t.BulletPrefab=void 0,t.BulletRoot=void 0,t.MainUI=void 0,t}n(t,e);var o=t.prototype;return o.onLoad=function(){var e=this;t.instance=this,u.addPersistRootNode(this.node),c.load("Prefabs/Bullet",f,(function(t,n){e.BulletPrefab=n}))},o.TouchPosToUIPos=function(e){return new p(e.x-this.canvas.node.getPosition().x,e.y-this.canvas.node.getPosition().y)},o.GetCanvasSize=function(){return new p(v.getVisibleSize().width,v.getVisibleSize().height)},o.CreateBullet=function(e){var t=h(this.BulletPrefab);return t.getComponent(I).Config=e,t.parent=this.BulletRoot,t},o.OpenUIResult=function(){var e=this;c.load("Prefabs/UI/UIResult",f,(function(t,n){h(n).parent=e.canvas.node}))},o.OpenUIOpenChest=function(){var e=this;c.load("Prefabs/UI/UIOpenChest",f,(function(t,n){h(n).parent=e.canvas.node}))},o.OnGameStart=function(){this.BulletRoot=d("Canvas/BulletRoot"),this.canvas=d("Canvas").getComponent(l),this.MainUI=d("Canvas/UIMain").getComponent(b),this.MainUI.SetTimer(U.TURN_TIME)},o.GetMainUI=function(){return this.MainUI},t}(g)).instance=void 0,B=t((y=w).prototype,"MainCamera",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(y.prototype,"canvas",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=y))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIOpenChest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Equitment.ts","./EquitmentManager.ts","./EventManager.ts","./EventType.ts","./GameManager.ts","./UIChestItem.ts"],(function(t){"use strict";var e,n,i,s,r,a,o,u,c,h,l,p,C,f,m,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,o=t.Prefab,u=t.Node,c=t.instantiate,h=t.Component},function(t){l=t.EquitmentData},function(t){p=t.EquitmentManager},function(t){C=t.EventManager},function(t){f=t.EventType},function(t){m=t.GameManager},function(t){g=t.UIChestItem}],execute:function(){var v,I,y,E,b,q,d;r._RF.push({},"44294aQOqBLA6+bJa4BgCqt","UIOpenChest",void 0);var O=a.ccclass,D=a.property;t("UIOpenChest",(v=O("UIOpenChest"),I=D(o),y=D(u),v((q=e((b=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"ChestItemPrefab",q,s(e)),i(e,"ChestArea",d,s(e)),e.curChestCount=0,e.curItems=void 0,e}n(e,t);var r=e.prototype;return r.start=function(){this.curChestCount=m.instance.ChestLootCount,this.curItems=new Array,this.OpenChest(),C.instance.RegisterEvent(f.EquitmentSelect,this.OnSelectEquit,this)},r.OpenChest=function(){if(!(this.curChestCount<=0)){for(var t=p.instance.RandomEquitment(3),e=0;e<t.length;e++){var n=c(this.ChestItemPrefab),i=l.Data[t[e]];n.name=i.Name,n.parent=this.ChestArea,n.getComponent(g).SetConfig(i),this.curItems.push(n)}this.curChestCount--}},r.OnSelectEquit=function(t){if(this.curChestCount>0){for(var e=0;e<this.curItems.length;e++)this.curItems[e].destroy();this.OpenChest()}else this.node.destroy()},r.onDestroy=function(){C.instance.DeleteEvent(f.EquitmentSelect,this.OnSelectEquit,this)},e}(h)).prototype,"ChestItemPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=e(b.prototype,"ChestArea",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=b))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIResult.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r,i,o,c,a,s,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,c=t._decorator,a=t.Button,s=t.director,l=t.Component}],execute:function(){var u,p,f,h,y;o._RF.push({},"da462QtS7xG446ocHEIibwT","UIResult",void 0);var B=c.ccclass,d=c.property;t("UIResult",(u=B("UIResult"),p=d(a),u((y=e((h=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o))||this,r(e,"BackBtn",y,i(e)),e}n(e,t);var o=e.prototype;return o.start=function(){this.BackBtn.node.on(a.EventType.CLICK,this.OnClickBtn,this)},o.OnClickBtn=function(t){s.loadScene("start")},e}(l)).prototype,"BackBtn",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=h))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIStart.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EquitmentManager.ts","./EventManager.ts","./GameManager.ts","./SaveManager.ts","./UIManager.ts"],(function(t){"use strict";var n,e,a,r,i,o,c,s,u,l,p,S,d,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,c=t.Button,s=t.director,u=t.Component},function(t){l=t.EquitmentManager},function(t){p=t.EventManager},function(t){S=t.GameManager},function(t){d=t.SaveManager},function(t){f=t.UIManager}],execute:function(){var m,g,h,v,y,B,C;i._RF.push({},"81843AzpZ5Ao49KQH7yI/mK","UIStart",void 0);var M=o.ccclass,G=o.property;t("UIStart",(m=M("UIStart"),g=G(c),h=G(c),m((B=n((y=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return n=t.call.apply(t,[this].concat(i))||this,a(n,"StartBtn",B,r(n)),a(n,"ContinueBtn",C,r(n)),n}e(n,t);var i=n.prototype;return i.start=function(){this.StartBtn.node.on(c.EventType.CLICK,this.OnClickBtn,this),this.ContinueBtn.node.on(c.EventType.CLICK,this.OnClickBtn,this)},i.OnClickBtn=function(t){var n=t.node.name;console.log(n),"StartBtn"==n?s.loadScene("scene",this.OnGameSceneLoaded):"ContinueBtn"==n&&(d.instance.Load(),s.loadScene("scene",this.OnGameSceneLoaded))},i.OnGameSceneLoaded=function(){p.instance.OnGameStart(),S.instance.OnGameStart(),f.instance.OnGameStart(),l.instance.OnGameStart(),S.instance.GameStart()},n}(u)).prototype,"StartBtn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=n(y.prototype,"ContinueBtn",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=y))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIStatusGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./EventType.ts"],(function(e){"use strict";var t,n,r,i,a,o,s,l,u,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Label,l=e.ProgressBar,u=e.Component},function(e){c=e.EventManager},function(e){p=e.EventType}],execute:function(){var h,g,f,y,v,b,P,E,x,C,H;a._RF.push({},"7cc6cXSCN5LGrQfDzy0l1iR","UIStatusGroup",void 0);var L=o.ccclass,T=o.property;e("UIStatusGroup",(h=L("UIStatusGroup"),g=T(s),f=T(s),y=T(l),v=T(l),h((E=t((P=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"HPText",E,i(t)),r(t,"LVText",x,i(t)),r(t,"LVBar",C,i(t)),r(t,"HPBar",H,i(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){c.instance.RegisterEvent(p.HPChange,this.OnHPChange,this),c.instance.RegisterEvent(p.ExpChange,this.OnExpChange,this)},a.update=function(e){},a.OnHPChange=function(e,t,n){console.log("UI监测到生命值变化：",t),this.HPText.string=e+"/"+n,this.HPBar.progress=e/n},a.OnExpChange=function(e,t,n){this.LVText.string="LV."+n,this.LVBar.progress=e/t},a.onDestroy=function(){c.instance.DeleteEvent(p.HPChange,this.OnHPChange,this),c.instance.DeleteEvent(p.ExpChange,this.OnExpChange,this)},t}(u)).prototype,"HPText",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(P.prototype,"LVText",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(P.prototype,"LVBar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(P.prototype,"HPBar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=P))||b));a._RF.pop()}}}));
